# 📖 0530 수업 내용 정리

## 📌 강의 개요
- 텍스트 파일 내에서 특정 **패턴**을 검색하는 `grep` 명령어의 기본 사용법과 주요 옵션을 학습합니다.
- 복잡한 패턴을 정의하는 강력한 도구인 **정규 표현식(Regular Expressions)**의 핵심 개념과 기본(BRE)/확장(ERE) 문법을 상세히 이해합니다.
- `find` 명령어와 `grep`, 정규 표현식을 조합하여 특정 조건의 파일들 내에서 원하는 내용을 검색하는 실용적인 활용법을 실습합니다.

---

## 🔍 핵심 개념

### ☑️ grep 명령어
`grep`은 **G**lobal search for a **R**egular **E**xpression and **P**rint out the line의 약자로, 텍스트 파일이나 표준 입력으로부터 특정 문자열 **패턴**을 포함하는 줄을 찾아 출력하는 강력한 유닉스/리눅스 유틸리티입니다.

#### ⚙️ 기본 사용법
```bash
grep [옵션] [검색할_패턴] [검색대상_파일]
```

#### ⌨️ 주요 옵션
| 옵션 | 설명 |
| :--- | :--- |
| `-i` | 대소문자를 구분하지 않고 검색합니다. (Ignore case) |
| `-v` | 패턴을 포함하지 *않는* 줄만 출력합니다. (Invert match) |
| `-n` | 결과 출력 시 각 줄 앞에 줄 번호를 함께 보여줍니다. |
| `-r`, `-R` | 지정된 디렉토리와 그 하위 디렉토리까지 재귀적으로 검색합니다. |
| `-w` | 패턴이 하나의 완전한 단어로 일치하는 경우만 검색합니다. (Whole word) |
| `-l` | 패턴과 일치하는 내용이 있는 파일의 **이름**만 출력합니다. (List files) |
| `-c` | 패턴과 일치하는 줄의 **개수**를 출력합니다. (Count) |
| `-E` | 패턴을 **확장 정규 표현식(ERE)**으로 해석합니다. (`egrep`과 동일) |

- **기본 예제**
  ```bash
  # /etc/services 파일에서 'http'라는 문자열이 포함된 줄을 줄 번호와 함께 찾기
  grep -n "http" /etc/services
  ```

---

### ☑️ 정규 표현식 (Regular Expressions) - 상세 설명
정규 표현식(Regex)은 단순한 문자열 검색을 넘어, 특정 **규칙(패턴)을 가진 문자열의 집합**을 표현하는 데 사용하는 강력한 도구입니다. 이는 그 자체로 하나의 '미니 언어'처럼 동작하며, `grep`, `sed`, `awk` 같은 셸 명령어는 물론, 대부분의 프로그래밍 언어에서 텍스트를 처리하는 데 핵심적인 역할을 합니다.

#### ⚙️ 기본(BRE) vs 확장(ERE) 정규 표현식
- **기본 정규 표현식 (BRE, Basic Regular Expressions)**: `grep`의 기본 동작 방식으로, 일부 메타 문자(`+`, `?`, `|`, `{}`)를 사용하려면 앞에 백슬래시(`\`)를 붙여 이스케이프 처리해야 합니다.
- **확장 정규 표현식 (ERE, Extended Regular Expressions)**: `grep -E` 또는 `egrep` 명령어에서 사용하며, 이스케이프 없이 더 많은 메타 문자를 직관적으로 사용할 수 있어 가독성이 높고 편리합니다.

### ☑️ 정규 표현식 핵심 메타 문자

#### 1️⃣ 문자 일치 (Character Matching)
| 메타 문자 | 설명 | 예시 |
| :--- | :--- | :--- |
| `.` | 어떤 문자든 **하나의 문자**와 일치합니다. (줄바꿈 제외) | `c.t`는 `cat`, `cot`, `c@t` 등과 일치합니다. |
| `[]` | 대괄호 안에 포함된 **문자 중 하나**와 일치합니다. | `gr[ae]y`는 `gray`와 `grey` 모두와 일치합니다. |
| `[ - ]` | 대괄호 안에서 하이픈(`-`)을 사용하여 **범위**를 지정합니다. | `[0-9]`는 모든 숫자, `[a-z]`는 모든 소문자와 일치합니다. |
| `[^]` | 대괄호 안에서 캐럿(`^`)을 사용하면, 괄호 안의 문자를 **제외한 나머지 문자 중 하나**와 일치합니다. | `[^0-9]`는 숫자가 아닌 모든 문자와 일치합니다. |

#### 2️⃣ 앵커 (Anchors) - 위치 지정
| 메타 문자 | 설명 | 예시 |
| :--- | :--- | :--- |
| `^` | 줄의 **시작** 부분에 내용이 일치해야 함을 의미합니다. | `^error`는 `error`로 시작하는 줄만 찾습니다. |
| `$` | 줄의 **끝** 부분에 내용이 일치해야 함을 의미합니다. | `done$`는 `done`으로 끝나는 줄만 찾습니다. |

#### 3️⃣ 수량자 (Quantifiers) - 반복 지정
| 메타 문자 | 설명 | `grep` (BRE) | `grep -E` (ERE) |
| :--- | :--- | :--- | :--- |
| `*` | 바로 앞의 문자가 **0번 이상** 반복되는 경우와 일치합니다. | `a*` | `a*` |
| `+` | 바로 앞의 문자가 **1번 이상** 반복되는 경우와 일치합니다. | `a\+` | `a+` |
| `?` | 바로 앞의 문자가 **0번 또는 1번** 나타나는 경우와 일치합니다. | `a\?` | `a?` |
| `{n}` | 바로 앞의 문자가 **정확히 n번** 반복되는 경우와 일치합니다. | `a\{n\}` | `a{n}` |
| `{n,m}`| 바로 앞의 문자가 **최소 n번, 최대 m번** 반복되는 경우와 일치합니다. | `a\{n,m\}` | `a{n,m}` |

#### 4️⃣ 그룹화 및 OR (Grouping and Alternation) - ERE 전용
| 메타 문자 | 설명 | 예시 (`grep -E` 사용) |
| :--- | :--- | :--- |
| `()` | 여러 문자를 하나의 덩어리로 **그룹화**합니다. | `(ab)+`는 `ab`, `abab`, `ababab` 등과 일치합니다. |
| `|` | **OR** 조건으로, 여러 패턴 중 하나와 일치하면 됩니다. | `error\|warning`는 `error` 또는 `warning`을 포함하는 줄과 일치합니다. |

---

### ☑️ find, grep, 정규 표현식 활용 예제

`find` 명령어는 파일 시스템에서 특정 조건(이름, 크기, 수정 시간 등)에 맞는 파일을 찾는 데 사용됩니다. `find`로 찾은 파일들을 대상으로 `grep`과 정규 표현식을 함께 사용하면 매우 강력한 검색 파이프라인을 구축할 수 있습니다.

#### ⌨️ 실용 예제: C 소스 파일에서 함수 정의 찾기
> **목표**: 현재 디렉토리와 모든 하위 디렉토리에서 `.c`로 끝나는 모든 파일을 찾아, 그 파일들 안에서 `int` 또는 `void`를 반환 타입으로 가지는 함수 정의 라인을 검색하기

```bash
find . -name "*.c" -print0 | xargs -0 grep -n -E '^\s*(int|void)\s+[a-zA-Z_]\w*\s*\([^)]*\)'
```

#### ⚙️ 명령어 분석
1.  **`find . -name "*.c" -print0`**
    - 현재 위치(`.`)부터 시작하여 이름(`-name`)이 `*.c` 패턴과 일치하는 모든 파일을 찾습니다.
    - `-print0`: 찾은 파일 경로의 끝을 줄바꿈 대신 NULL 문자로 구분하여 출력합니다. 파일 이름에 공백이 포함되어 있어도 안전하게 처리하기 위함입니다.

2.  **`|` (파이프)**
    - `find` 명령어의 결과를 다음 명령어인 `xargs`의 표준 입력으로 전달합니다.

3.  **`xargs -0 grep -n -E '...'`**
    - `xargs -0`: NULL 문자로 구분된 입력을 받아 `grep` 명령어의 인자로 안전하게 넘겨줍니다.
    - `grep -n -E`: 줄 번호(`-n`)를 표시하고, 확장 정규 표현식(`-E`)을 사용하여 검색합니다.

4.  **`'^\s*(int|void)\s+[a-zA-Z_]\w*\s*\([^)]*\)'` (정규 표현식 패턴)**
    - `^`: 줄의 시작을 의미합니다.
    - `\s*`: 공백, 탭 등 보이지 않는 문자가 0번 이상 반복됨을 의미합니다. (들여쓰기 처리)
    - `(int|void)`: `int` 또는 `void` 라는 단어와 일치합니다.
    - `\s+`: 하나 이상의 공백 문자가 뒤따릅니다. (반환 타입과 함수 이름 사이의 공백)
    - `[a-zA-Z_]\w*`: C 언어의 유효한 함수 이름 규칙에 맞는 패턴입니다. (첫 글자는 영문자나 `_`, 이후에는 영문자, 숫자, `_`가 0번 이상 반복)
    - `\s*\(`: 함수 이름 뒤에 오는 여는 괄호 `(`를 찾습니다.
    - `[^)]*`: 닫는 괄호 `)`가 아닌 모든 문자가 0번 이상 반복됨을 의미합니다. (함수 인자 부분)
    - `\)`: 닫는 괄호 `)`를 찾습니다.

이 명령어를 실행하면, 지정된 모든 C 소스 파일 내에서 `int some_function(...)` 또는 `void other_function(...)`과 같은 형태의 라인을 찾아 파일 경로와 줄 번호를 함께 출력해 줍니다.

---
