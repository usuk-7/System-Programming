# 🐧 8장 파일 유틸리티 요약

### 📌 강의 개요
이 장에서는 리눅스/유닉스 시스템에서 파일을 효율적으로 관리하는 데 사용되는 필수 유틸리티 명령어들을 학습합니다. 주요 내용은 다음과 같습니다.

* **파일 찾기:** `find`
* **파일 내용 필터링:** `grep`
* **파일 정렬:** `sort`
* **파일 비교:** `cmp`, `diff`
* **파일 분할 및 병합:** `split`, `cat`, `paste`

---

## 🔍 8.1 파일 속성으로 파일 찾기 (find)

### ☑️ `find` 명령어
* **설명:** 파일 이름이나 다양한 속성(수정 시간, 크기, 소유자 등)을 이용하여 원하는 파일을 검색하는 강력한 명령어입니다.
* **사용법:**
    ```bash
    $ find [검색 시작 디렉토리] [옵션 및 검색 조건]
    ```

#### ⌨️ 주요 검색 조건 및 처리 방법

| 옵션 | 설명 |
| :--- | :--- |
| `-name 파일명` | 지정된 파일명으로 파일을 검색합니다[cite: 9]. |
| `-user 사용자명` | 파일 소유자로 검색합니다. |
| `-perm nnn` | 특정 접근 권한(예: `755`)을 가진 파일을 검색합니다. |
| `-type x` | 파일 종류로 검색합니다 ( `f`: 일반 파일, `d`: 디렉토리, `l`: 링크 등). |
| `-size n` | 파일 크기로 검색합니다 (`+n`: n보다 큼, `-n`: n보다 작음). |
| `-atime`, `-mtime` | 파일 접근 시간(atime) 또는 수정 시간(mtime)으로 검색합니다 (`+n`: n일 이전, `-n`: n일 이내). |
| `-exec 명령어 {} \;` | 검색된 각 파일에 대해 지정된 명령어를 실행합니다. `{}`는 파일명을 의미합니다. |
| `-print`, `-ls` | 검색된 파일의 경로를 출력하거나(`-print`) `ls -dils` 형식으로 상세 정보를 출력합니다(`-ls`). |

#### ✅ 사용 예시
```bash
# /usr 디렉토리에서 .c로 끝나는 모든 파일 검색
$ find /usr -name "*.c" -print

# 현재 디렉토리에서 'chang' 소유의 파일을 찾아 상세 정보 출력
$ find . -user chang -ls

# 여러 조건 조합: 타입이 디렉토리이고 권한이 700인 것 검색
$ find . -type d -perm 700 -print

# 검색된 파일을 대상으로 명령어 실행: core 파일을 찾아 삭제
$ find . -name core -exec rm -i {} \;
```

---

## 🔍 8.2 파일 필터링 (grep)

### ☑️ `grep` 명령어
* **설명:** 파일 내용에서 특정 문자열 패턴을 찾아 해당 패턴을 포함하는 줄을 출력하는 명령어입니다. 파이프(`|`)와 함께 다른 명령어의 출력 결과를 필터링하는 데에도 널리 사용됩니다.
* **사용법:**
    ```bash
    $ grep [옵션] [패턴] [파일명...]
    ```

#### ⌨️ 주요 옵션

| 옵션 | 기능 |
| :--- | :--- |
| `-i` | 대소문자를 무시하고 검색합니다. |
| `-v` | 패턴을 포함하지 *않는* 줄을 출력합니다. |
| `-n` | 결과 출력 시 각 줄의 줄 번호를 함께 보여줍니다. |
| `-w` | 패턴이 하나의 완전한 단어로 일치하는 경우만 검색합니다. |
| `-l` | 패턴이 포함된 파일의 이름만 출력합니다. |
| `-c` | 패턴과 일치하는 줄의 개수를 출력합니다. |

#### ☑️ 정규식(Regular Expressions)
`grep`은 정규식을 사용하여 복잡한 패턴 검색을 수행할 수 있습니다.

| 문자 | 의미 | 예시 |
| :--- | :--- | :--- |
| `.` | 임의의 한 문자를 의미합니다. | `st..`는 'st'로 시작하는 4글자 문자열을 찾습니다. |
| `*` | 바로 앞의 문자가 0번 이상 반복됨을 의미합니다. | `st.*e`는 'st'로 시작하고 'e'로 끝나는 모든 문자열을 찾습니다. |
| `[]` | 대괄호 안의 문자 중 하나와 일치함을 의미합니다. | `[abc]d`는 'ad', 'bd', 'cd'를 찾습니다. |
| `^`, `$` | 각각 줄의 시작과 끝을 의미합니다. | `^You`는 'You'로 시작하는 줄을 찾습니다. |

#### ✅ 사용 예시
```bash
# you.txt 파일에서 'raise'가 포함된 줄을 대소문자 구분 없이 검색
$ grep -i 'raise' you.txt

# you.txt 파일에서 'raise'가 포함되지 않은 모든 줄을 출력
$ grep -v 'raise' you.txt

# 현재 디렉토리 파일 목록 중 'chang'이 포함된 결과만 필터링
$ ls -l | grep chang
```

---

## 🔍 8.3 파일 정렬 (sort)

### ☑️ `sort` 명령어
* **설명:** 텍스트 파일의 내용을 줄 단위로 정렬합니다. 기본적으로 각 줄의 첫 번째 필드를 기준으로 오름차순 정렬합니다.
* **사용법:**
    ```bash
    $ sort [옵션] [파일명...]
    ```

#### ⌨️ 주요 옵션 및 필드 지정

| 옵션 | 기능 |
| :--- | :--- |
| `-r` | 역순(내림차순)으로 정렬합니다. |
| `-n` | 숫자 값을 기준으로 정렬합니다 (예: "100"이 "49"보다 큼). |
| `-f` | 대소문자를 구분하지 않고 정렬합니다. |
| `-k 필드번호` | 정렬 기준이 될 필드를 지정합니다. 필드 번호는 1부터 시작합니다. |
| `-t 문자` | 필드를 구분하는 문자를 지정합니다 (기본값: 공백). |
| `-o 출력파일` | 정렬된 결과를 지정된 파일에 저장합니다. |

#### ✅ 사용 예시
```bash
# you.txt 파일을 기본 오름차순으로 정렬
$ sort you.txt

# you.txt 파일을 내림차순으로 정렬
$ sort -r you.txt

# you.txt 파일의 3번째 필드를 기준으로 정렬
$ sort -k 3 you.txt

# /etc/passwd 파일에서 ':'를 구분자로 사용하여 3번째 필드(UID)를 숫자 기준으로 정렬
$ sort -t: -k 3 -n /etc/passwd
```

---

## 🔍 8.4 파일 비교

### ☑️ `cmp` 명령어
* **설명:** 두 파일이 완전히 동일한지 바이트 단위로 비교합니다.
* **출력:** 두 파일이 같으면 아무것도 출력하지 않고, 다르면 처음으로 달라지는 지점의 바이트와 줄 번호를 출력합니다.
    ```bash
    $ cmp you.txt me.txt
    you.txt me.txt 다름: 340 자, 10 행
    ```

### ☑️ `diff` 명령어
* **설명:** 두 파일을 줄 단위로 비교하여 차이점을 분석하고, 첫 번째 파일을 두 번째 파일과 같게 만들기 위한 **편집 명령 형태**로 결과를 출력합니다.
* **편집 명령어:**
    * **추가 (a):** `n1 a n3,n4` - 파일1의 `n1`번째 줄 뒤에 파일2의 `n3`~`n4`번째 줄을 추가해야 함.
    * **삭제 (d):** `n1,n2 d n3` - 파일1의 `n1`~`n2`번째 줄을 삭제해야 함.
    * **변경 (c):** `n1,n2 c n3,n4` - 파일1의 `n1`~`n2`번째 줄을 파일2의 `n3`~`n4`번째 줄로 변경해야 함.

---

## 🔍 8.5 기타 파일 조작

### ☑️ `split` - 파일 분할
* **설명:** 하나의 큰 파일을 지정된 크기나 줄 수에 따라 여러 개의 작은 파일로 분할합니다.
* **사용법:**
    ```bash
    # you.txt 파일을 10줄씩 나누어 xaa, xab, ... 이름으로 저장
    $ split -l 10 you.txt
    ```

### ☑️ `cat` / `paste` - 파일 합병
* **`cat`:** 여러 파일을 순차적으로 연결하여 하나의 파일로 합병합니다.
    ```bash
    # xaa와 xab 파일을 합쳐 xmerge 파일 생성
    $ cat xaa xab > xmerge
    ```
* **`paste`:** 여러 파일을 줄 단위(열 기준)로 나란히 합병합니다.
    ```bash
    # line.txt와 you.txt의 각 줄을 나란히 붙여 출력
    $ paste line.txt you.txt
    ```

---
